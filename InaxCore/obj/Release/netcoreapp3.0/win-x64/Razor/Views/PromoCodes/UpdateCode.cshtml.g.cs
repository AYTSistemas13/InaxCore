#pragma checksum "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1b342f5068287a75b92e534795ce74d6fa56739b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_PromoCodes_UpdateCode), @"mvc.1.0.view", @"/Views/PromoCodes/UpdateCode.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\_ViewImports.cshtml"
using InaxCore;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\_ViewImports.cshtml"
using InaxCore.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1b342f5068287a75b92e534795ce74d6fa56739b", @"/Views/PromoCodes/UpdateCode.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"de2440f23d8fea7a6de71ba0896f6fbc3bb152e4", @"/Views/_ViewImports.cshtml")]
    public class Views_PromoCodes_UpdateCode : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<PromoCodeInfo>
    {
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
  
    ViewData["Title"] = "Modificar Código";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"container-fluid mx-0 my-5 pt-5\">\r\n    <div class=\"row\">\r\n        <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n                <input type=\"hidden\" class=\"form-control\" id=\"promoCodeId\"");
            BeginWriteAttribute("value", " value=\"", 286, "\"", 303, 1);
#nullable restore
#line 10 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
WriteAttributeValue("", 294, Model.Id, 294, 9, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                <label for=\"promoCodeInput\">Código Promocional</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"promoCodeInput\" placeholder=\"Ejemplo: EMPRENDEDOR2021\"");
            BeginWriteAttribute("value", " value=\"", 493, "\"", 517, 1);
#nullable restore
#line 12 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
WriteAttributeValue("", 501, Model.PromoCode, 501, 16, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@">
                <small id=""promoCodeInputSmall"" class=""form-text text-muted"">Puedes generar el código que desees.</small>
            </div>
            <div class=""form-group"">
                <label for=""siteSelector"">Selecciona familia</label>
                <select id=""familySelector"" name=""familySelected[]"" multiple placeholder=""Selecciona las familias"">
");
#nullable restore
#line 18 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                      
                        Console.WriteLine(Model.ItemsList);
                        var familiesList = Model.FamiliesSelected.Split(",");

                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                     foreach (ItemFamily family in ViewData["familyList"] as List<ItemFamily>)
                    {

                        if (familiesList.Contains(family.FamilyName))
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1b342f5068287a75b92e534795ce74d6fa56739b5655", async() => {
#nullable restore
#line 28 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                                                   Write(family.FamilyName);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 28 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                               WriteLiteral(family.FamilyName);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.SingleQuotes);
            BeginWriteTagHelperAttribute();
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __tagHelperExecutionContext.AddHtmlAttribute("selected", Html.Raw(__tagHelperStringValueBuffer), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.Minimized);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 29 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1b342f5068287a75b92e534795ce74d6fa56739b8119", async() => {
#nullable restore
#line 32 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                                          Write(family.FamilyName);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 32 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                               WriteLiteral(family.FamilyName);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.SingleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 33 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                        }
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                </select>
            </div>
            <button type=""button"" id=""filterByFamily"" class=""btn btn-primary"">Filtrar</button>
            <div class=""form-group"">
                <label for=""startDate"">Fecha de inicio</label>
                <input id=""startDate"" type=""date"" min=""1000-01-01""
                       max=""3000-12-31"" class=""form-control""");
            BeginWriteAttribute("value", " value=\"", 1997, "\"", 2054, 1);
#nullable restore
#line 41 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
WriteAttributeValue("", 2005, String.Format("{0:yyyy-MM-dd}", Model.StartDate), 2005, 49, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@">
            </div>
            <div class=""form-group"">
                <label for=""expirationDate"">Fecha de expiración</label>
                <input id=""expirationDate"" type=""date"" min=""1000-01-01""
                       max=""3000-12-31"" class=""form-control""");
            BeginWriteAttribute("value", " value=\"", 2322, "\"", 2380, 1);
#nullable restore
#line 46 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
WriteAttributeValue("", 2330, String.Format("{0:yyyy-MM-dd}", Model.ExpireDate), 2330, 50, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"siteSelector\">Selecciona sitio</label>\r\n                <select id=\"siteSelector\" name=\"siteSelected[]\" multiple placeholder=\"Selecciona los sitios\">\r\n");
#nullable restore
#line 51 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                      
                        Console.WriteLine(Model.ItemsList);
                        var sitesList = Model.SiteId.Split(",");
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 55 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                     foreach (StoreSite site in ViewData["sitesArray"] as List<StoreSite>)
                    {
                        if (sitesList.Contains(site.siteId))
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1b342f5068287a75b92e534795ce74d6fa56739b12712", async() => {
#nullable restore
#line 59 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                                             Write(site.siteName);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 59 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                               WriteLiteral(site.siteId);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.SingleQuotes);
            BeginWriteTagHelperAttribute();
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __tagHelperExecutionContext.AddHtmlAttribute("selected", Html.Raw(__tagHelperStringValueBuffer), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.Minimized);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 60 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1b342f5068287a75b92e534795ce74d6fa56739b15161", async() => {
#nullable restore
#line 63 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                                    Write(site.siteName);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 63 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                               WriteLiteral(site.siteId);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.SingleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 64 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                        }
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                </select>
            </div>
            <button type=""button"" id=""createCode"" class=""btn btn-primary"">Actualizar</button>
        </div>
        <div class=""col-10"">
            <table class=""table table-bordered"" id=""itemsTable"">
                <thead>
                    <tr>
                        <th width=""15%"">Artículo</th>
                        <th width=""60%"">Nombre</th>
                        <th width=""10%"">% Desc.</th>
                        <th width=""15%"">C. Mínima</th>
                    </tr>
                </thead>
                <tbody id=""itemsTableBody""></tbody>
            </table>
        </div>
");
            WriteLiteral("    </div>\r\n</div>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n<script>\r\n    var currentMultiselect = null;\r\n    console.log(\'");
#nullable restore
#line 118 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
            Write(Model.ItemsList);

#line default
#line hidden
#nullable disable
                WriteLiteral("\');\r\n    var currentItemsSelected = JSON.parse(\'");
#nullable restore
#line 119 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                      Write(Model.ItemsList);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"'.replace(/&quot;/g, '""'));
    var itemsDataTable = null;
    $(document).ready(function () {
        $('#familySelector').selectize();
        $('#filterByFamily').click();
    });
    $(document).ready(function () {
        $('#siteSelector').selectize();
    });

    $('#createCode').click(() => {
        if ($('#promoCodeInput').val() == '') {
            toastr.warning('Favor de ingresar el código promocional');
            return;
        } else if ($('#promoCodeInput').val().length > 20) {
            toastr.warning('El nombre no debe de tener un máximo de 20 caracteres');
            return;
        }
        if ($('#familySelector').val().length <= 0) {
            toastr.warning('Favor de ingresar al menos una familia');
            return;
        }
        if ($('#siteSelector').val().length <= 0) {
            toastr.warning('Favor de ingresar al menos un sitio');
            return;
        }
        if ($('#expirationDate').val() == '') {
            toastr.warning('");
                WriteLiteral(@"Favor de ingresar la fecha de expiración');
            return;
        }
        if ($('#startDate').val() == '') {
            toastr.warning('Favor de ingresar la fecha de inicio');
            return;
        }
        $('input[type=search]').val('');
        itemsDataTable.search('').draw();
        let itemsList = {};
        let itemDiscountList = $('.itemDiscount');
        let itemMinQuantityList = $('.itemMinQuantity');
        $.each(itemDiscountList, (index, value) => {
            if ($(value).val() == '') return;
            itemsList[$(value).data('id')] = {};
            itemsList[$(value).data('id')].itemDiscount = $(value).val();
        });
        $.each(itemMinQuantityList, (index, value) => {
            if ($(value).val() == '') return;
            console.log($(value).data('id'));
            if (itemsList[$(value).data('id')]) {
                itemsList[$(value).data('id')].itemMinQuantity = $(value).val();
            }
        });
        if (Object.keys(ite");
                WriteLiteral(@"msList).length <= 0) {
            toastr.warning('Favor de configurar por lo menos un artículo');
            return;
        }
        let promoCode = $('#promoCodeInput').val();
        let expireDate = $('#expirationDate').val();
        let startDate = $('#startDate').val();
        let siteId = $('#siteSelector').val().toString();
        let promoCodeId = $('#promoCodeId').val();
        let familiesSelected = $('#familySelector').val().toString();
        $.post('");
#nullable restore
#line 180 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
           Write(Url.Action("UpdatePromoCode", "PromoCodes"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"', { Id: promoCodeId, promoCode, itemsList: JSON.stringify(itemsList), startDate, expireDate, siteId, familiesSelected }).done((data) => {
            if (data.success) {
                toastr.success('Se actualizó el código promocional');
                setInterval(location.replace('");
#nullable restore
#line 183 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                         Write(Url.Action("Index", "PromoCodes"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"'),3000);
            }
        });
    });

    $('#filterByFamily').click(() => {
        let familyList = $('#familySelector').val();
        if (familyList.length <= 0) {
            toastr.warning('Favor de ingresar al menos una familia');
            return;
        }
        $('body').attr('data-msj', 'Procesando Petición ...');
        $('body').addClass('load-ajax');
        $('body').append('<div class=""lean-overlay""></div>');
        if (itemsDataTable != null) {
            itemsDataTable.destroy();
            $('#itemsTable tbody').html('');
            //let itemsList = {};
            let itemsList = JSON.parse('");
#nullable restore
#line 201 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
                                   Write(Model.ItemsList);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"'.replace(/&quot;/g, '""'));
            let itemDiscountList = $('.itemDiscount');
            let itemMinQuantityList = $('.itemMinQuantity');
            $.each(itemDiscountList, (index, value) => {
                if ($(value).val() == '') return;
                itemsList[$(value).data('id')] = {};
                itemsList[$(value).data('id')].itemDiscount = $(value).val();
            });
            $.each(itemMinQuantityList, (index, value) => {
                if ($(value).val() == '') return;
                console.log($(value).data('id'));
                if (itemsList[$(value).data('id')]) {
                    itemsList[$(value).data('id')].itemMinQuantity = $(value).val();
                }
            });
            currentItemsSelected = itemsList;
            $.get('");
#nullable restore
#line 217 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
              Write(Url.Action("GetItemsFamily", "PromoCodes"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"', { familyList: Object.assign({}, familyList) }).done((data) => {
                $.each(data.message, (key, value) => {
                    if (currentItemsSelected[value.itemNumber]) {
                        $('#itemsTableBody').prepend(`<tr class='bg-success text-white'>
                        <td width=""15%"">${value.itemNumber}</td>
                        <td width=""60%"">${value.searchName}</td>
                        <td width=""10%""><input type='number' class='form-control itemDiscount' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='${currentItemsSelected[value.itemNumber].itemDiscount}'></input></td>
                        <td width=""15%""><input type='number' class='form-control itemMinQuantity' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='${currentItemsSelected[value.itemNumber].itemMinQuantity}'></input></td>
                        </tr>`);
       ");
                WriteLiteral(@"             } else {
                        $('#itemsTableBody').append(`<tr>
                        <td width=""15%"">${value.itemNumber}</td>
                        <td width=""60%"">${value.searchName}</td>
                        <td width=""10%""><input type='number' class='form-control itemDiscount' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10'></input></td>
                        <td width=""15%""><input type='number' class='form-control itemMinQuantity' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='0'></input></td>
                        </tr>`);
                    }
                });
                itemsDataTable = $('#itemsTable').DataTable({
                    ""order"": [],
                    ""scrollY"": ""60vh"",
                    ""scrollCollapse"": true,
                    ""paging"": false,
                    ""responsive"": true,
                    ");
                WriteLiteral("\"destroy\": true,\r\n                });\r\n                $(\'body\').removeClass(\'load-ajax\');\r\n                $(\'body .lean-overlay\').remove();\r\n            });\r\n        } else {\r\n            $.get(\'");
#nullable restore
#line 247 "C:\Users\sistemas13\Downloads\InaxCore\InaxCore\Views\PromoCodes\UpdateCode.cshtml"
              Write(Url.Action("GetItemsFamily", "PromoCodes"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"', { familyList: Object.assign({}, familyList) }).done((data) => {
                $.each(data.message, (key, value) => {
                    if (currentItemsSelected[value.itemNumber]) {
                        $('#itemsTableBody').prepend(`<tr class='bg-success text-white'>
                        <td width=""15%"">${value.itemNumber}</td>
                        <td width=""60%"">${value.searchName}</td>
                        <td width=""10%""><input type='number' class='form-control itemDiscount' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='${currentItemsSelected[value.itemNumber].itemDiscount}'></input></td>
                        <td width=""15%""><input type='number' class='form-control itemMinQuantity' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='${currentItemsSelected[value.itemNumber].itemMinQuantity}'></input></td>
                        </tr>`);
       ");
                WriteLiteral(@"             } else {
                        $('#itemsTableBody').append(`<tr>
                        <td width=""15%"">${value.itemNumber}</td>
                        <td width=""60%"">${value.searchName}</td>
                        <td width=""10%""><input type='number' class='form-control itemDiscount' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10'></input></td>
                        <td width=""15%""><input type='number' class='form-control itemMinQuantity' data-id='${value.itemNumber}' onchange='verifyInputs(this)' style='border:0!important;' placeholder='ej. 10' value='0'></input></td>
                        </tr>`);
                    }
                });
                itemsDataTable = $('#itemsTable').DataTable({
                    ""order"": [],
                    ""scrollY"": ""60vh"",
                    ""scrollCollapse"": true,
                    ""paging"": false,
                    ""responsive"": true,
                    ");
                WriteLiteral(@"""destroy"": true,
                });
                $('body').removeClass('load-ajax');
                $('body .lean-overlay').remove();
            });
        }
    });

    function verifyInputs(element) {
        if ($(element).hasClass('itemDiscount')) {
            if ($(element).val() > 100) {
                toastr.warning('El descuento no puede sobrepasar el 100%');
                $(element).val(100)
            }
        }
        let trElement = $(element).parent().parent();
        let minQuantityItem = $(element).parent().siblings().last()[0];
        minQuantityItem = $(minQuantityItem).children()[0];
        console.log($(element).val());
        if ($(element).val() == '') {
            if ($(trElement).hasClass('bg-success text-white')) {
                $(trElement).removeClass('bg-success text-white');
            }
            return;
        }
        if ($(minQuantityItem).val() != '') {
            console.log($(element).parent().parent());
            $(tr");
                WriteLiteral(@"Element).addClass('bg-success text-white');
        } else {
            if ($(trElement).hasClass('bg-success text-white')) {
                $(trElement).removeClass('bg-success text-white');
            }
        }
    }

    var items = []
    $('#siteSelector').on('change', function () {
        if ($(this).hasClass('selectized')) {
            if (this.value == 'All') {
                var control = $('#siteSelector')[0].selectize
                control.destroy()
                control._events = { change: [] };
                $('#siteSelector').prop('multiple', false)
                $('#siteSelector').val('All')
                $('#siteSelector').selectize()
                items = []
            } else {
                var control = $('#siteSelector')[0].selectize
                if (control.items.includes('All')) {
                    control.destroy()
                    control._events = { change: [] };
                    $('#siteSelector').prop('multiple', false)
    ");
                WriteLiteral(@"                $('#siteSelector').val('All')
                    $('#siteSelector').selectize()
                    items = []
                } else {
                    control = $('#siteSelector')[0].selectize
                    items = control.items
                    control.destroy()
                    control._events = { change: [] };
                    $('#siteSelector').prop('multiple', 'multiple')
                    $('#siteSelector').val(items)
                    $('#siteSelector').selectize()
                    //console.log(control.items)
                }
            }
        }
    })

</script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<PromoCodeInfo> Html { get; private set; }
    }
}
#pragma warning restore 1591
